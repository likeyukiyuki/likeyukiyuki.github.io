#使用vue+python实现的简单番茄钟
#####日期: 2023-09-01 02:51:26
###前端vue所实现的功能：
>1.实现计时器功能，即一轮30分钟的倒计时，前25分钟工作，后五分钟休息。
参考代码如下：
>>
```ts
//定义一些需要用到的变量
const seconds = ref(0);
const minutes = ref(30);
const state = ref(State.Init);
const is_pause = ref(false);
var timer: number | undefined;
var count=0;
const msg=ref("")

//定义三种不同的状态
enum State {
  Init, // 初始
  Working, // 工作
  Resting // 休息
}
//关于工作状态的设置
function message() {
  if (state.value === State.Init) {
    return "还未启动";
  } else if (state.value === State.Working) {
    return "工作";
  } else if (state.value === State.Resting) {
    return "休息";
  }
}
//根据当前时间数值返回不同状态
function clock() {
  if (minutes.value > 5 && minutes.value < 30) {
    state.value = State.Working;
  } else {
    state.value = State.Resting;
  }
}

```
>
这里设定了一个计时器，timefn()函数控制了计时的开始，pauseFn()函数控制了计时的结束
>>
```ts

function timeFn() {
  is_pause.value = false;
  clearInterval(timer);
  timer = window.setInterval(() => {
    clock()
    if (minutes.value <= 0 && seconds.value <= 0) {
      state.value = State.Init;//设置初始状态
      count=1;//后期用的计算轮数的变量
      console.log(count);
      pauseFn();
      vue_count();
    } else {
      if (seconds.value == 0) {
        seconds.value = 60;
        minutes.value--;
      } else {
        seconds.value--;
      }
    }
  }, 1000);
  
}
//暂停倒计时
function pauseFn() {
  clearInterval(timer);
  is_pause.value = true;
}

```
>如果想要网页上提醒用户现在的状态，使用computed是非常方便的选择，参考代码如下：
```ts
const filled_minute = computed(() => fill(minutes));
const filled_second = computed(() => fill(seconds));

const message_state = computed(() => message());


function fill(in_num: Ref<number>) {
  if (in_num.value >= 10) {
    return in_num.value.toString();
  } else {
    return "0" + in_num.value.toString();//当倒计时到个位数时自动补零
  }
}

unction click() {
  if (minutes.value <= 0 && seconds.value <= 0) {
    
    minutes.value = 30;//当倒计时结束重新启动时把时间补回30分钟
    seconds.value = 0;
    timeFn();
    
  } else {
    timeFn();
  }
  

}
```
>绑定到网页上的按钮：
```ts
<template>
            <div style="width: 200px; height: 100px;clear: both;text-align: center;">
            <el-button style="margin-top: 20%;margin-left: 65px;" type="primary" @click="click">开始</el-button>
            <el-button style="margin-top: 20%;" type="danger" @click="pauseFn">暂停</el-button>
          </div>
          <el-footer>现在是{{ message_state }}时间哦~</el-footer>
</template>
 
```
